@using HrModell;
@{
    Layout = null;
}
@{
    var list=ViewData["list"] as List<salary_grant_detailsModel>;
    var xcid = ViewData["xcbh"];
    var jgrs = ViewData["jgrs"];
    var jbze = ViewData["jbze"];
    var sfze = ViewData["sfze"];
    var grdid = "grdid";
    var index = 0;
    var bosum = "bounsSum";
    var saleSum = "saleSum";
    var deductSum = "deductSum";
    var salaryPaidSum = "salaryPaidSum";
    var salaryStandardSum = "salaryStandardSum";
    var jlid = "jlid";  var jxid = "jxid";  var ykid = "ykid";  var sfid = "sfid";
 }
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Fh</title>
    <link href="~/css/table.css" rel="stylesheet" />
    <script src="~/javaScript/jquery-1.7.2.js"></script>
  
</head>
<body>
    <div>
        <form method="post" action="/GrantCheck/Fh">
            <table width="100%">
                <tr>
                    <td style="text-align:left;">
                        <font color="black">您正在做的业务是:人力资源管理--薪酬发放管理--薪酬发放复核</font>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: right">
                        <input type="submit" value="复核通过" class="BUTTON_STYLE1">
                        <input type="button" value="返 回" onclick="location.href='check_list.html'" class="BUTTON_STYLE1">
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: left">
                        薪酬单编号：@xcid<input type="text" hidden="hidden" name="xcid" value="@xcid"/>
                        <input type="hidden" name="salaryGrant.salaryGrantId" value="HS1353753198460">
                    </td>
                </tr>
              
                <tr>
                    <td style="text-align: left">
                        本机构总人数:@jgrs
                        <input type="hidden" name="salaryGrant.humanAmount" value="5">
                        ，基本薪酬总数:@jbze<input type="hidden" name="salaryGrant.salaryStandardSum" value="139823.0" />
                        ，实发总额:<span id="rrtt">@sfze</span><input type="text" hidden="hidden" id="rrtt2" name="sfzq" value="@sfze"/>
                        <input type="hidden" id="salaryPaidSum" name="salaryGrant.salaryPaidSum" value="139823.0" />
                        <input type="hidden" name="salaryGrant.register" value="better_admin" />
                        <input type="hidden" name="salaryGrant.registTime" value="2012-11-24 18:33:46.0" />
                    </td>
                    <td style="text-align: right">

                        复核人:<input type="text" name="salaryGrant.checker" value="阳旭明" size="8" readonly="readonly">
                        复核时间：<span id="Tdate"></span><input type="text" hidden="hidden" id="tti" name="time"/>
                        <input type="hidden" name="salaryGrant.checkTime" id="Tdate2">
                    </td>
                </tr>
            </table>
            <table width="100%" border="1" cellpadding=0 cellspacing=1
                   bordercolorlight=#848284 bordercolordark=#eeeeee
                   class="TABLE_STYLE1">
                <tr>
                    <td class="TD_STYLE1">
                        <span>序号</span>
                    </td>
                    <td class="TD_STYLE1">
                        <span>档案编号</span>
                    </td>
                    <td class="TD_STYLE1">
                        <span>姓名</span>
                    </td>

                    <td class="TD_STYLE1">
                        基本工资
                    </td>

                    <td class="TD_STYLE1">
                        岗位工资
                    </td>

                    <td class="TD_STYLE1">
                        交通补助
                    </td>

                    <td class="TD_STYLE1">
                        午餐补助
                    </td>

                    <td class="TD_STYLE1">
                        五险一金
                    </td>
                    <td class="TD_STYLE1" width="7%">
                        奖励金额
                    </td>
                    <td class="TD_STYLE1" width="7%">
                        销售绩效总额
                    </td>
                    <td class="TD_STYLE1" width="7%">
                        应扣金额
                    </td>
                    <td class="TD_STYLE1" width="7%">
                        实发金额
                    </td>

                </tr>
                @foreach (var item in list)
                {
                     grdid = "grdid";
                     bosum = "bounsSum";
                saleSum = "saleSum";
                deductSum = "deductSum";
                salaryPaidSum = "salaryPaidSum";
                salaryStandardSum = "salaryStandardSum";
                       jlid = "jlid" ;   jxid = "jxid";   ykid = "ykid";   sfid = "sfid";
                      index++;
                     bosum = bosum + index;
                saleSum = saleSum + index;
                deductSum = deductSum + index;
                salaryPaidSum = salaryPaidSum + index;
                salaryStandardSum = salaryStandardSum + index;
                      grdid = "grdid"+index;
                        jlid = "jlid"+index ;   jxid = "jxid"+index;   ykid = "ykid"+index;   sfid = "sfid"+index;
                    <input type="hidden" name="grantDetails[0].salaryGrantId" value="HS1353753198460">
                    <input type="hidden" id="@salaryStandardSum" name="grantDetails[0].salaryStandardSum" value="@item.zq" />
                    <tr class="TD_STYLE2">
                        <td hidden="hidden"><input type="text" value="@item.grid" name="@grdid" /></td>
                        <td hidden="hidden"><input type="text" value="@item.sgrd" name="sgrid22" /></td>
                        <td>
                            @index
                        </td>
                        <td>

                            @item.human_id
                        </td>
                        <td>
                            @item.human_name
                        </td>
                        <td>
                            @item.jb
                        </td>

                        <td>
                            @item.gw

                        </td>
                        <td>
                            @item.jt
                        </td>
                        <td>
                            @item.wc
                        </td>

                        <td>
                            @item.wx
                        </td>

                        <td>
                            <input type="text" name="@jlid" id="@bosum" value="@item.jl" onkeyup="onKeyPress('@index')" class="INPUT_STYLE2" />
                           
                        </td>
                        <td>
                            <input type="text" name="@jxid" id="@saleSum" value="@item.jx" onkeyup="onKeyPress('@index')" class="INPUT_STYLE2" />
                        </td>
                        <td>
                            <input type="text" name="@ykid" id="@deductSum" value="@item.yk" onkeyup="onKeyPress('@index')" class="INPUT_STYLE2" />
                        </td>
                        <td>
                            <input type="text" name="@sfid" readonly="readonly" value="@item.sf" id="@salaryPaidSum" class="INPUT_STYLE2" />
                        </td>

                    </tr>
                }

                <tr>
                    <td hidden="hidden" id="hid" >@index <input type="text" name="row" hidden="hidden" value="@index"/></td>
                </tr>

            </table>
        </form>
        <SCRIPT type="text/javascript">

            function onKeyPress(i) {
                var size = 5;
                var bounsSum = document.getElementById("bounsSum" + i);
                var saleSum = document.getElementById("saleSum" + i);
                var deductSum = document.getElementById("deductSum" + i);
                var salaryPaidSum = document.getElementById("salaryPaidSum" + i);
                if (isNaN(bounsSum.value) || bounsSum.value < 0) {
                    alert("金额填写错误!");
                    bounsSum.value = "0.00";
                    return;
                }
                if (isNaN(saleSum.value) || saleSum.value < 0) {
                    alert("金额填写错误!");
                    saleSum.value = "0.00";
                    return;
                }
                if (isNaN(deductSum.value) || deductSum.value < 0) {
                    alert("金额填写错误!");
                    deductSum.value = "0.00";
                    return;
                }
                var v3 = "salaryStandardSum" + i;
               
                salaryPaidSum.value = Number(bounsSum.value) + Number(saleSum.value) - Number(deductSum.value) + Number(document.getElementById(v3).value);

                var sum = 0; var row = $("#hid").text();
                for (var j = 1; j <= row; j++) {
                    sum = Number(sum) + Number(document.getElementById("salaryPaidSum" + j).value);
                   
                }
               
                $("#rrtt").text(sum);
                $("#rrtt2").val(sum);
            }



            function time() {
                var tdate = document.getElementById("Tdate");
                var d = new Date();
                var y = d.getFullYear();
                var moth = d.getMonth() + 1;
                var date = d.getDate();
                var h = d.getHours();
                var m = d.getMinutes();
                var s = d.getSeconds();
                var hh = 20 - 1 - h;
                var mm = 60 - 1 - m;
                var ss = 60 - s;
                if (hh > 0) {
                    mm = mm + 60 * hh;
                }
                if (moth < 10) {
                    moth = "0" + moth;
                }
                if (date < 10) {
                    date = "0" + date;
                }
                if (h < 10) {
                    h = "0" + h;
                }
                if (m < 10) {
                    m = "0" + m;
                }
                if (s < 10) {
                    s = "0" + s;
                }
                if (mm < 10) {
                    mm = "0" + mm;
                }
                if (ss < 10) {
                    ss = "0" + ss;
                }

                tdate.innerHTML = y + "-" + moth + "-" + date + " " + h + ":" + m + ":" + s;
                document.getElementById("Tdate2").value = tdate.innerHTML;
                document.getElementById("tti").value = tdate.innerHTML;
            }
            window.onload = time;
            var out = window.setInterval(time, 1000);
        </SCRIPT>
    </div>
</body>
</html>
